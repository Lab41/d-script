import numpy as np
import h5py
from class_icdar_iterator import *
sys.path.append('../../d-script/')
# d-script imports
from data_iters.minibatcher import MiniBatcher
from data_iters.iam_hdf5_iterator import IAM_MiniBatcher

# Shingle, horizontal, and vertical step sizes
ss = (120,120)
hs = 30
vs = 30

hdf5name='icdar13data/experimental-processed/author_icdar13_ex.hdf5'
hdf5name='icdar13data/experimental-processed/icdar13_ex.hdf5'

hdf5file=h5py.File(hdf5name)

for imname in hdf5file.keys():
   img = 1.0 - hdf5file[imname].value /255.0 
   for j, shard in enumerate(StepShingler(img, hstep=hs, vstep=vs, shingle_size=ss)):
      shard
      # f[j] = fiel( shard )
